<div class="main-content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header-danger">
                        <h4 class="card-title ">Customer Table</h4>
                        <p class="card-category"> Customer Details</p>
                    </div>

                    <div *ngIf="true">
                        <div class="container-fluid tbl">
                            <p-table [columns]="selectedColumns" [value]="_customerList">
                                <ng-template pTemplate="caption">
                                    <div class="row">
                                        <div class="col col-md-4">
                                            <p-multiSelect [options]="cols" [(ngModel)]="selectedColumns"
                                                optionLabel="header" selectedItemsLabel="{0} columns selected"
                                                [style]="{minWidth: '200px'}"
                                                placeholder="Choose Columns"></p-multiSelect>
                                            <button class="button" (click)="exportExcel()">Export</button>
                                        </div>
                                        <!-- <div class="col-md-4"> -->

                                        <!-- <mat-form-field appearance="fill">
                                            <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
                                                <input matStartDate formControlName="start" placeholder="Start date">
                                                <input matEndDate formControlName="end" placeholder="End date">
                                            </mat-date-range-input>
                                            <mat-hint>MM/DD/YYYY â€“ MM/DD/YYYY</mat-hint>
                                            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                                            <mat-date-range-picker #picker></mat-date-range-picker>
                                        </mat-form-field> -->
                                        <!-- </div> -->
                                    </div>
                                </ng-template>
                                <ng-template pTemplate="header" let-columns>
                                    <tr>
                                        <th>ID</th>

                                        <th *ngFor="let col of columns">
                                            {{col.header}}
                                        </th>

                                        <th>
                                            Account Created
                                        </th>
                                        <!-- <th>
                                            Onya created
                                        </th>
                                        <th>
                                            Sender Onya picked (Count)
                                        </th>
                                        <th>
                                            Driver picked (Count)
                                        </th>
                                        <th>
                                            Driver delivered(Count)
                                        </th>
                                        <th>
                                            Sender Onya Created (Count)
                                        </th> -->

                                        <th>
                                            Is Mobile Verified
                                        </th>
                                        <th>
                                            Is Email Verified
                                        </th>
                                        <th>
                                            View Logs
                                        </th>
                                        <th>
                                            User Status
                                        </th>
                                        <th>
                                            Driver Status
                                        </th>
                                        <th>
                                            Documents
                                        </th>
                                    </tr>
                                </ng-template>

                                <ng-template pTemplate="body" let-product let-columns="columns">
                                    <tr>
                                        <td>{{product.userid}}</td>

                                        <td *ngFor="let col of columns">
                                            <div (click)="customerFullDetails(product.userid ,product)">
                                                {{product[col.field]}}</div>
                                        </td>
                                        <td>
                                            {{product.accountcreated}}
                                        </td>
                                        <!-- <td>
                                            {{product.onyacreated}}
                                        </td>
                                        <td>
                                            {{product.senderonyapicked}}
                                        </td>
                                        <td>
                                            {{product.driverpicked}}
                                        </td>
                                        <td>
                                            {{product.driverdelivered}}
                                        </td>
                                        <td>
                                            {{product.senderonyacreated}}
                                        </td> -->
                                        <td>
                                            {{product.ismobileverified?'Yes':'No'}}
                                        </td>
                                        <td>
                                            {{product.isemailverified?'Yes':'No'}}
                                        </td>

                                        <td>
                                        </td>
                                        <td>
                                            <p-inputSwitch (onChange)="handleChange($event,product.userid)"
                                                [(ngModel)]="product.isuserverified">
                                            </p-inputSwitch>
                                        </td>
                                        <td>
                                            <p-inputSwitch (onChange)="handleChange($event,product.userid)"
                                                [(ngModel)]="product.isdriververified">
                                            </p-inputSwitch>
                                        </td>
                                        <td class="text-primary">
                                            <!-- <a (click)="openPopUp()">View</a> -->
                                            <p style="cursor: pointer;" (click)="openPopUp(product.userid)">View</p>
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>

                    </div>
                    <div *ngIf="false" class="card-body">
                        <div class="table-responsive">

                            <table class="table">
                                <thead class="">
                                    <th>
                                        ID
                                    </th>
                                    <th>
                                        Name
                                    </th>

                                    <th>
                                        Email
                                    </th>

                                    <th>
                                        Phone
                                    </th>
                                    <th>
                                        Is Mobile Verified
                                    </th>
                                    <th>
                                        Is Email Verified
                                    </th>

                                    <th>
                                        User Status
                                    </th>
                                    <th>
                                        View Logs
                                    </th>
                                    <th>
                                        Documents
                                    </th>
                                </thead>
                                <tbody>

                                    <tr *ngFor="let item of _customerList;let i=index">
                                        <td>
                                            {{item.userid}}
                                        </td>
                                        <td>
                                            {{item.name}}
                                        </td>
                                        <td>
                                            {{item.email}}
                                        </td>
                                        <td>
                                            {{item.phone}}
                                        </td>
                                        <td>
                                            {{item.ismobileverified?'Yes':'No'}}
                                        </td>
                                        <td>
                                            {{item.isemailverified?'Yes':'No'}}
                                        </td>
                                        <td>
                                            <p-inputSwitch (onChange)="handleChange($event,item.userid)"
                                                [(ngModel)]="item.isverifiedbyadmin">
                                            </p-inputSwitch>
                                        </td>
                                        <td>
                                        </td>

                                        <td class="text-primary">
                                            <!-- <a (click)="openPopUp()">View</a> -->
                                            <p style="cursor: pointer;" (click)="openPopUp(item.userid)">View</p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="parent2">
<p-dialog [(visible)]="showDialog" header="Documents" [draggable]="false"   [baseZIndex]="10000"
    [resizable]="false" [closable]='true' (onHide)="closePopUp()">
    <!-- [style]="{width: '40vw'}" its inside the dialog box -->
    <!-- <app-dialog-cus-document [userId]="userId"></app-dialog-cus-document> -->
    <div class="main-content">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 ">
                    <div class="card">
                        <div class="card-body col-lg-12 col-md-6 col-sm-12 " *ngFor="let item of _documentsList">

                            <p>{{item.type}}</p>

                            <img [src]="item.url" width="100" alt="" class="video_error-icon">

                            <div class="down_side">
                                <div class="radio">
                                    <p-inputSwitch (onChange)="handleChanges(item)" [(ngModel)]="item.isverified">
                                    </p-inputSwitch>
                                </div>


                                <input class="input_type" type="text" placeholder="Comment" [(ngModel)]="item.comment">
                            </div>
                        </div>
                        <!-- <p>{{_isVerify==true?'Verified':'Not Verified'}}</p>
                        <p-inputSwitch (onChange)="handleChanges($event)" [(ngModel)]="_isVerify">
                        </p-inputSwitch> -->
                    </div>
                </div>

            </div>
        </div>
    </div>
</p-dialog>
</div>

<div class="parent">

    <p-dialog [(visible)]="_isFullDetails" header="Documents" [draggable]="false" [style]="{width: '80vw'}"
        [baseZIndex]="10000" [resizable]="false" [closable]='true' (onHide)="closePopUp()">
        <!--  this is inside the p-dialog tag -->
        <!-- style="width: 80vw; z-index: 2;" -->
        <p-tabView>


            <p-tabPanel header="Customer Details">
                <div class="tabContainer" data-aos="fade-up" data-aos-duration="1000">
                    <!-- <div class="innerBox">
                        {{_userDetails.name}}
                    </div> -->
                    <div class="table-responsive">

                        <table class="table">
                            <thead class="">
                                <th>
                                    Name
                                </th>
                                <th>
                                    Onya created
                                </th>
                                <th>
                                    Sender Onya picked (Count)
                                </th>
                                <th>
                                    Driver picked (Count)
                                </th>
                                <th>
                                    Driver delivered(Count)
                                </th>
                                <th>
                                    Sender Onya Created (Count)
                                </th>

                            </thead>
                            <tbody>

                                <tr>
                                    <td>
                                        {{_userDetails.name}}
                                    </td>
                                    <td>
                                        {{_userDetails.onyacreated}}
                                    </td>
                                    <td>
                                        {{_userDetails.senderonyapicked}}
                                    </td>
                                    <td>
                                        {{_userDetails.driverpicked}}
                                    </td>
                                    <td>
                                        {{_userDetails.driverdelivered}}
                                    </td>
                                    <td>
                                        {{_userDetails.senderonyacreated}}
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </p-tabPanel>
            <p-tabPanel header="Other Details">
                <div class="tabContainer" data-aos="fade-up" data-aos-duration="1000">

                    <div class="innerBox">
                        <table style="width: 100%;">
                            <tr>
                                <th>Package Size</th>
                                <th>Package Weight</th>
                                <th>Package Weight</th>
                                <th>Comments</th>
                                <th>Pickup Date</th>
                                <th>Pickup Address</th>
                                <th>Drop Address</th>
                                <th>Pickup Point</th>
                                <th>Drop Point</th>
                                <th>Pickup Slot</th>
                                <th>Receiver Name</th>
                                <th>Receiver Email</th>
                                <th>Receiver Phone</th>
                                <th>Amount</th>
                                <th>Cancounter</th>
                                <th>Status</th>
                                <th>Driver Status</th>
                                <th>Owner Name</th>
                            </tr>
                            <tr *ngFor="let item of _getUserOnyasList">
                                <td>{{item.packagesize}}</td>
                                <td>{{item.packageweight}}</td>
                                <td>{{item.packagetype}}</td>
                                <td>{{item.comments}}</td>
                                <td>{{item.pickupdate}}</td>
                                <td>{{item.pickupaddress}}</td>
                                <td>{{item.dropaddress}}</td>
                                <td>{{item.pickuppoint}}</td>
                                <td>{{item.droppoint}}</td>
                                <td>{{item.pickupslot}}</td>
                                <td>{{item.receivername}}</td>
                                <td>{{item.receiveremail}}</td>
                                <td>{{item.receiverphone}}</td>
                                <td>{{item.amount}}</td>
                                <td>{{item.cancounter}}</td>
                                <td>{{item.status}}</td>
                                <td>{{item.driverstatus}}</td>
                                <td>{{item.ownername}}</td>
                            </tr>
                        </table>

                    </div>
                </div>
            </p-tabPanel>
        </p-tabView>
    </p-dialog>

</div>
<ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="#fff" type="ball-atom" [fullScreen]="true">
    <p style="color: white"> Loading... </p>
</ngx-spinner>